# ==================================================
# Recipe Scraper Service - Environment Configuration
# ==================================================
# Copy this file to .env and fill in your values
# FREE tier options marked with üÜì
# See FREE_APIS_SETUP.md for detailed setup instructions
# ==================================================

# --------------------------------------------------
# üÜì FREE LLM APIs (Choose at least one!)
# --------------------------------------------------

# Groq (‚≠ê RECOMMENDED - Fastest, High rate limits)
# Get free key at: https://console.groq.com
GROQ_API_KEY=

# Together AI ($25 free credits, no credit card)
# Get free credits at: https://together.ai
TOGETHER_API_KEY=

# Hugging Face (30k characters/month free)
# Get free key at: https://huggingface.co/settings/tokens
HUGGINGFACE_API_KEY=

# Ollama (‚≠ê Completely free - runs locally)
# Install from: https://ollama.ai
USE_OLLAMA=false
OLLAMA_URL=http://localhost:11434
OLLAMA_MODEL=llama2

# --------------------------------------------------
# üÜì FREE Nutrition APIs
# --------------------------------------------------

# OpenFoodFacts (No API key needed - 2.8M+ products)
# Automatically used as primary fallback

# Edamam (10 req/min, 10k/month free)
# Get free key at: https://www.edamam.com
EDAMAM_APP_ID=
EDAMAM_APP_KEY=

# USDA FoodData Central (‚≠ê RECOMMENDED - 3600/hour free)
# Get free key at: https://fdc.nal.usda.gov/api-key-signup.html
USDA_API_KEY=

# --------------------------------------------------
# üÜì FREE Recipe Search APIs
# --------------------------------------------------

# TheMealDB & Recipe Puppy (No API keys needed)
# Automatically available

# Spoonacular (150 requests/day free)
# Get free key at: https://spoonacular.com/food-api
SPOONACULAR_API_KEY=

# --------------------------------------------------
# Database (Supabase - üÜì FREE tier: 500MB, 2GB transfer)
# --------------------------------------------------
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key
SUPABASE_ANON_KEY=your-anon-key
DATABASE_URL=postgresql://postgres:password@db.your-project.supabase.co:5432/postgres

# --------------------------------------------------
# Caching (Upstash Redis - üÜì FREE tier: 10K commands/day)
# --------------------------------------------------
UPSTASH_REDIS_REST_URL=https://your-redis.upstash.io
UPSTASH_REDIS_REST_TOKEN=your-redis-token

# Optional: Local Redis (if you prefer)
# REDIS_URL=redis://localhost:6379

# --------------------------------------------------
# AI & NLP Services
# --------------------------------------------------

# Google AI (üÜì FREE tier: 60 requests/min)
GOOGLE_API_KEY=your-google-api-key
GOOGLE_AI_API_KEY=your-google-ai-key  # For Gemini

# Google Vision API (üÜì FREE tier: 1000 units/month)
GOOGLE_VISION_API_KEY=your-vision-api-key
# OR use service account JSON
# GOOGLE_VISION_KEY_FILE=./google-vision-service-account.json

# --------------------------------------------------
# Nutrition Data (USDA - üÜì FREE tier: 1000 requests/hour)
# --------------------------------------------------
USDA_API_KEY=your-usda-api-key
# Get free API key at: https://fdc.nal.usda.gov/api-key-signup.html

# --------------------------------------------------
# Optional: Image Processing & OCR
# --------------------------------------------------
IMGUR_CLIENT_ID=your-imgur-client-id

# --------------------------------------------------
# Audio Transcription (Optional - Expensive!)
# --------------------------------------------------
# Google Cloud Speech API
GOOGLE_CLOUD_SPEECH_API_KEY=your-speech-api-key

# OpenAI Whisper API (Alternative)
OPENAI_API_KEY=your-openai-api-key

# Enable/disable audio transcription (disabled by default for cost)
ENABLE_AUDIO_TRANSCRIPTION=false

# --------------------------------------------------
# Performance & Features
# --------------------------------------------------

# Caching
CACHE_ENABLED=true
CACHE_TTL=3600                    # Cache TTL in seconds (1 hour)
ENABLE_MEMORY_CACHE=true          # LRU in-memory cache
ENABLE_REDIS_CACHE=true           # Upstash Redis cache
ENABLE_DB_CACHE=false             # Database cache (optional)

# Processing
MAX_RETRIES=3                     # API retry attempts
TIMEOUT_MS=30000                  # Request timeout (30s)
MAX_CONCURRENT_REQUESTS=5         # Parallel requests
BATCH_SIZE=50                     # Batch processing size

# Enrichment
ENABLE_NUTRITION=true             # Fetch nutrition data
ENABLE_EMBEDDING=false            # Generate embeddings (slow/expensive)
ENABLE_AI_ENRICHMENT=false        # AI-powered enrichment (costs money)

# Features
NO_FILE_CACHE=true                # Disable file-based caching
LITE_MODEL=gemini-1.5-flash-latest  # Use lite AI model for speed

# --------------------------------------------------
# Deployment
# --------------------------------------------------
NODE_ENV=production               # production | development
LOG_LEVEL=info                    # error | warn | info | debug
PORT=3000                         # API server port

# --------------------------------------------------
# Optional: Notifications
# --------------------------------------------------
EMAIL_USERNAME=your-email@gmail.com
EMAIL_PASSWORD=your-app-password
NOTIFICATION_EMAIL=alerts@example.com

# --------------------------------------------------
# Optional: Monitoring
# --------------------------------------------------
SENTRY_DSN=your-sentry-dsn        # Error tracking
JAEGER_ENDPOINT=http://localhost:14268/api/traces  # Distributed tracing

# --------------------------------------------------
# Circuit Breaker Config
# --------------------------------------------------
CIRCUIT_BREAKER_FAILURE_THRESHOLD=5
CIRCUIT_BREAKER_TIMEOUT=60000     # 1 minute
CIRCUIT_BREAKER_SUCCESS_THRESHOLD=2

# --------------------------------------------------
# Blocked Websites Registry
# --------------------------------------------------
BLOCK_THRESHOLD=5                 # Failures before temporary block
PERMANENT_BLOCK_THRESHOLD=20      # Failures before permanent block
COOLDOWN_PERIOD_MS=3600000        # 1 hour cooldown for temp blocks
